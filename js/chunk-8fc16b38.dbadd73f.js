(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8fc16b38"],{"0c95":function(t,e,a){"use strict";var s=a("14cf");a.n(s).a},"14cf":function(t,e,a){},6498:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return c}));a("f548");function s(t,e){var a=Date.parse(t);return(Date.parse(e)-a)/864e5}function n(t){if(t)return t.slice(5,t.length).replace(/\//,"月")+"日"}function i(t,e){if(t)return t=(t=t.replace("月","/")).replace("日",""),"".concat(e||(new Date).getFullYear(),"/").concat(t)}function c(t){return new Date(Date.parse((new Date).toLocaleDateString())+24*t*60*60*1e3).toLocaleDateString()}},ce4f:function(t,e,a){"use strict";a.r(e);a("cc57"),a("2aa3"),a("06a2"),a("ec25"),a("6d57");var s=a("02fb"),n=a("6498"),i=a("fa7d"),c=[{title:"任务",dataIndex:"name",scopedSlots:{customRender:"name"},width:"200px"},{title:"分类",dataIndex:"type",width:"200px"},{title:"进度",dataIndex:"process",scopedSlots:{customRender:"process"},width:"300px"},{title:"子任务数",dataIndex:"subTask",width:"200px"},{title:"详情",dataIndex:"details",scopedSlots:{customRender:"details"},width:"100px"}],r={data:function(){return{columns:c,taskData:s.a,taskList:s.a,typeList:[],taskVisible:!1,taskTemplate:"",keyWords:"",getDaysBetweenDays:n.d,dateFormatDeal:n.a}},computed:{consumeJudge:function(){return function(t,e){return e?Object(n.d)(t,e):this.getDaysBetweenDays(t,(new Date).toLocaleDateString())}}},created:function(){this.initTaskList()},methods:{initTaskList:function(){this.setTaskKey(),this.handleTaskType(),this.handlePercent(),this.setTop(),this.setSubTask()},setTaskKey:function(){Object(i.c)(this.taskList),this.taskList.forEach((function(t){Object(i.c)(t.targetNodeList),t.targetNodeList.forEach((function(t){Object(i.c)(t.childrenTask)}))}))},handleTaskType:function(){var t=[];s.a.forEach((function(e){t.push(e.type)})),t.unshift("全部"),this.typeList=Array.from(new Set(t))},handlePercent:function(){var t=this;s.a.forEach((function(e){var a=0;e.targetNodeList.forEach((function(e){var s=0;e.childrenTask.forEach((function(t){s+=t.process})),s/=e.childrenTask.length,t.$set(e,"process",parseInt(s)?parseInt(s):0),a+=e.process})),a/=e.targetNodeList.length,t.$set(e,"process",parseInt(a)?parseInt(a):0)}))},typeSelect:function(t){var e=[];this.taskList=s.a,this.taskList.forEach((function(a){a.type===t&&e.push(a)})),this.taskList="全部"===t?s.a:e},showDetail:function(t){this.$router.push({path:"taskList/taskDetail",query:{key:t.key,data:"taskData"}})},createTask:function(){var t="\n  {\n    name: '任务名',\n    type: '分类',\n    createTime: '".concat((new Date).toLocaleDateString(),"',\n    targetNodeList: [\n      {\n        targetName: '任务节点1',\n        childrenTask: [\n          {\n            name: '子任务1',\n            process: 0\n          }\n        ]\n      },\n      {\n        targetName: '任务节点2',\n        childrenTask: []\n      }\n    ]\n  },\n      ");this.taskTemplate=t,this.taskVisible=!0},handleOk:function(){this.taskVisible=!1},search:function(t){var e=[];s.a.forEach((function(a){-1!==a.name.indexOf(t)&&e.push(a)})),this.taskList=e},reset:function(){this.taskList=this.taskData,this.keyWords=""},setTop:function(){var t=[];this.taskList.forEach((function(e){t.push(Object(i.a)(e))})),t.map((function(e,a){e.isTop&&(t.splice(a,1),t.unshift(e))})),this.taskList=t},setSubTask:function(){var t=this;this.taskList.forEach((function(e){var a=0;e.targetNodeList.forEach((function(t){a+=t.childrenTask.length})),t.$set(e,"subTask",a)}))}}},o=(a("0c95"),a("9ca4")),u=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taskList"},[a("div",{staticClass:"menuBar"},[a("a-select",{staticStyle:{width:"150px"},attrs:{"default-value":"全部"},on:{change:t.typeSelect}},t._l(t.typeList,(function(e){return a("a-select-option",{key:e,attrs:{value:e}},[t._v("\n        "+t._s(e)+"\n      ")])})),1),a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"任务名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(t.keyWords)}},model:{value:t.keyWords,callback:function(e){t.keyWords=e},expression:"keyWords"}}),a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.search(t.keyWords)}}}),a("a-button",{staticClass:"resetBtn",attrs:{type:"primary"},on:{click:function(e){return t.reset()}}},[t._v("\n      Reset\n    ")]),a("a-button",{staticStyle:{"margin-left":"auto"},attrs:{type:"primary"},on:{click:t.createTask}},[t._v("\n      New task\n    ")])],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.taskList},scopedSlots:t._u([{key:"name",fn:function(e,s){return a("span",{on:{click:function(e){return t.showDetail(s)}}},[a("a",[t._v(t._s(s.isTop?e+" 🌟":e))])])}},{key:"process",fn:function(e){return a("div",{staticClass:"processBar"},[a("div",{staticClass:"barMask"},[a("div",{staticClass:"bar",style:"width:"+e+"px"})]),a("p",[t._v(t._s(e+"%"))])])}},{key:"details",fn:function(e,s){return a("span",{},[a("a-popover",{attrs:{title:"Title"}},[a("template",{slot:"content"},[a("p",[t._v("耗时："+t._s(t.consumeJudge(s.createTime,s.endTime)||0)+"天")]),a("p",[t._v("创建时间："+t._s("暂未开始"!==s.createTime?t.dateFormatDeal(s.createTime):s.createTime))]),a("p",[t._v("完成时间："+t._s(t.dateFormatDeal(s.endTime)||"暂未完成"))])]),a("a",[t._v("Details")])],2)],1)}}])}),a("a-modal",{attrs:{width:"70%",title:"任务模板"},on:{ok:t.handleOk},model:{value:t.taskVisible,callback:function(e){t.taskVisible=e},expression:"taskVisible"}},[a("pre",[t._v(t._s(t.taskTemplate))])])],1)}),[],!1,null,"20d3126e",null);e.default=u.exports}}]);